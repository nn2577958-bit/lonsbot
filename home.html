<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LONS Palworld Home</title>
<link rel="icon" href="https://cdn.phototourl.com/uploads/2026-02-16-2fc87bae-3744-4c0a-891f-19f3a20b09fd.png">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

<style>
body{ margin:0; font-family:'Segoe UI',sans-serif; background:#111; color:white; }
/* ===== ìƒë‹¨ë°” ===== */
.topbar{ display:grid; grid-template-columns: 2fr 3fr; align-items:center; padding:10px 15px; background:#000; border-bottom:1px solid #333; gap:10px; }
.topbar-left{ font-size:18px; font-weight:bold; }
.topbar-right{ display:flex; justify-content:flex-end; align-items:center; gap:8px; }
.top-btn{ padding:5px 12px; border-radius:16px; border:none; cursor:pointer; font-size:12px; font-weight:600; }
#admin-status{ padding:5px 12px; border-radius:16px; background:#444; font-size:12px; transition: all 0.3s; text-align:center; }
/* ë²„íŠ¼ ìƒ‰ìƒ */
.pay-btn{ background:#FFDC00; color:#000; }
.discord-btn{ background:#5865F2; color:#fff; }
.logout-btn{ background:#f44336; color:#fff; }
/* ===== ê³µì§€ ì „ì²´ í™”ë©´ ===== */
.notice-section{ padding:15px; }
.notice-section h2{ font-size:20px; margin-bottom:10px; }
.notice-list{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:10px;
}
.notice-item{
  background:#1c1c1c;
  padding:10px;
  border-radius:10px;
  border-left:4px solid #4CAF50;
  font-size:12px;
  line-height:1.2;
}
.notice-item strong{ font-size:13px; display:block; margin-bottom:3px; }
.notice-item small{ color:#aaa; display:block; margin-bottom:5px; }
/* ===== PC ëª¨ë‹¬ ===== */
.modal{ display:none; position:fixed; top:0;left:0; width:100%;height:100%; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; }
.modal-content{ background:white; color:black; padding:20px; border-radius:12px; text-align:center; width:280px; }
.modal-content button{ margin-top:10px; padding:6px 12px; border:none; background:#333; color:white; border-radius:8px; cursor:pointer; }
</style>
</head>

<body>
<!-- ìƒë‹¨ë°” -->
<div class="topbar">
  <div class="topbar-left">ğŸ® LONS Palworld</div>
  <div class="topbar-right">
    <div id="admin-status">í™•ì¸ì¤‘...</div>
    <button class="top-btn pay-btn" id="kakao-btn">ğŸ’› Pay ì§€ì›ê¸ˆ</button>
    <button class="top-btn discord-btn" id="discord-btn"><i class="fab fa-discord"></i> Discord</button>
    <button class="top-btn logout-btn" id="logout-btn">ë¡œê·¸ì•„ì›ƒ</button>
  </div>
</div>

<!-- ê³µì§€ ì „ì²´í™”ë©´ -->
<div class="notice-section">
  <h2>ğŸ“¢ ê³µì§€ì‚¬í•­</h2>
  <div class="notice-list" id="notice-list"></div>
</div>

<!-- PC ì•ˆë‚´ íŒì—… -->
<div class="modal" id="pc-modal">
  <div class="modal-content">
    <h3>ğŸ“± ëª¨ë°”ì¼ ì „ìš©</h3>
    <p>ì¹´ì¹´ì˜¤í˜ì´ëŠ” ëª¨ë°”ì¼ì—ì„œ ì´ìš©í•´ì£¼ì„¸ìš”.</p>
    <button onclick="closeModal()">ë‹«ê¸°</button>
  </div>
</div>

<script type="module">
import { auth } from "./firebase.js";
import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

const ADMIN_EMAIL="nn2577958@gmail.com";

const adminStatus = document.getElementById("admin-status");
const noticeList = document.getElementById("notice-list");
const kakaoBtn = document.getElementById("kakao-btn");
const discordBtn = document.getElementById("discord-btn");
const logoutBtn = document.getElementById("logout-btn");
const modal = document.getElementById("pc-modal");

const notices = [
  {title:"ê³µì§€ ì‚¬í•­",content:"í•­ìƒ ëª¨ë‹ˆí„°ë§ ì¤‘ì´ë©° ëª¨ë“  íŒŒì¼ì€ ë°ì´í„° ë² ì´ìŠ¤ì— ê¸°ë¡ ë©ë‹ˆë‹¤.",createdAt:"2026-02-17 12:00~12:10"},
  {title:"ì‹ ê·œ ë½‘ê¸° ì´ë²¤íŠ¸ ì‹œì‘!",content:"ë‹¹ì²¨ë˜ì‹  ë¶„ë“¤ì€ ìš”ì²­ ì£¼ì‹œë©´ ì§€ê¸‰ ì²˜ë¦¬ë©ë‹ˆë‹¤.",createdAt:"2026-02-16 14:00"},
  {title:"ì—…ë°ì´íŠ¸ ì™„ë£Œ",content:"PAL 0.7.2 ìµœì‹  íŒ¨ì¹˜ê°€ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.",createdAt:"2026-02-16 14:30"},
  {title:"SV ì˜¤í”ˆ ë‚ ì§œ",content:"2026 01.12",createdAt:"2026-01-12 01:00"},
  {title:"ì§€ì›ê¸ˆ ì•ˆë‚´",content:"ëª¨ë“  ì§€ì›ê¸ˆì€ ìš´ì˜ë¹„ì— ì“°ì´ê³  ìˆìŠµë‹ˆë‹¤,",createdAt:"2026-02-16 14:30"},
  {title:"ì„œë²„ ì ‘ì† ìƒí™©",content:"1SV / 2SV ëª¨ë‘ ì •ìƒ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤.",createdAt:"2026-02-16 00:00"},
  {title:"ì„œë²„ ì˜¤í”ˆ ì•ˆë‚´",content:"í•˜ë“œì½”ì–´ 02 / 20 å¤§ ì˜¤í”ˆ ë§ì´ ì‚¬ë‘ í•´ì£¼ì„¸ìš”!",createdAt:"2026-02-20 12:00"}
];

onAuthStateChanged(auth, (user) => {
  if(!user){ window.location.href="index.html"; return; }

  // ê´€ë¦¬ì ì˜¨ë¼ì¸ í‘œì‹œ
  if(user.email === ADMIN_EMAIL){
      function updateAdminStatus(){
          const now = new Date();
          const kstString = now.toLocaleString("ko-KR", { hour12:false, timeZone:"Asia/Seoul" });
          adminStatus.innerHTML = `ğŸŸ¢ ê´€ë¦¬ì ì˜¨ë¼ì¸ â€“ ${kstString}`;
      }
      updateAdminStatus();
      setInterval(updateAdminStatus,1000);

      // ê¹œë¹¡ì„
      setInterval(()=>{
          adminStatus.style.opacity = adminStatus.style.opacity === "0" ? "1" : "0";
      }, 800);

      adminStatus.style.background = "#28a745";
  } else {
      adminStatus.innerHTML = "ğŸ”´ ê´€ë¦¬ì ì˜¤í”„ë¼ì¸";
      adminStatus.style.background = "#dc3545";
      adminStatus.style.opacity = "1";
  }

  // ê³µì§€ì‚¬í•­ ë Œë”
  noticeList.innerHTML = "";
  notices.forEach(data => {
      const div = document.createElement("div");
      div.className = "notice-item";
      div.innerHTML = `
          <strong>${data.title}</strong>
          <small>${data.createdAt}</small>
          <div>${data.content}</div>
      `;
      noticeList.appendChild(div);
  });
});

// ë¡œê·¸ì•„ì›ƒ
logoutBtn.onclick = async () => {
  await signOut(auth);
  window.location.href="index.html";
};

// Discord ë²„íŠ¼
discordBtn.onclick = () => window.open("https://discord.gg/tnMXbQ65Hk","_blank");

// Pay ë²„íŠ¼
kakaoBtn.onclick = () => {
  const ua = navigator.userAgent || navigator.vendor || window.opera;
  const isMobile = /iPhone|iPad|iPod|Android/i.test(ua);
  if(isMobile){
      window.location.href="https://qr.kakaopay.com/FRydbZ6Gr";
  } else {
      modal.style.display = "flex";
  }
};

// ëª¨ë‹¬ ë‹«ê¸°
window.closeModal = () => modal.style.display="none";
</script>
</body>
</html>
